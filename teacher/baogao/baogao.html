<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>慧读</title>
<link href="css/baogao.css" rel="stylesheet" type="text/css" />
<script src="js/jquery.min.js"></script>
</head>

<body>
<header class="ti-header">
	<div class="w1080">
		<a class="login" href="#">导出</a>
	</div>
</header>
<section class="section bg01">
	<div class="content">
		<div class="baogao">
			<div class="baogao-area style1">
				<h2>
                    <p></p>
                </h2>
				<p class="img01"></p>
				<dl>
					<dt>2007年上学期</dt>
					<dd>五年级一班</dd>
				</dl>
			</div>
			<div class="baogao-area style2">
				<h2>
                    <span class="baogao-area-tit1">综述</span>
                </h2>
				<p>本学期全班<em>54</em>人合计阅读书籍/文章<em>119</em>篇，<em>312</em>万字，阅读时长<em>143.5</em>小时，线下阅读<em>84</em>本(篇)，全校排名：<em>7</em>平台排名：<em>23</em></p>
                <dl>
                    <dt class="baogao_list_icon baogao_tit_color">阅读量前三名分别为：</dt>
                    <dd><span>迟新月</span>,<span>7</span>万字,<span>3</span>本，<span>112</span>分钟</dd>
                    <dd><span>梁心媛</span>,<span>6.6</span>万字,<span>4</span>本，<span>200</span>分钟</dd>
                    <dd><span>陈富林</span>,<span>5.7</span>万字,<span>2</span>本，<span>60</span>分钟</dd>
                </dl>
                <dl>
                    <dt class="baogao_list_icon baogao_tit_color">校园排名：</dt>
                    <dd><span>五年级三班</span>,<span>迟新月</span>,<span>7</span>万字,<span>3</span>本，<span>112</span>分钟</dd>
                    <dd class="baogao_list_color"><span>五年级一班</span>,<span>梁心媛</span>,<span>6.6</span>万字,<span>4</span>本，<span>200</span>分钟</dd>
                    <dd><span>五年级二班</span>,<span>陈富林</span>,<span>5.7</span>万字,<span>2</span>本，<span>60</span>分钟</dd>
                </dl>
                <dl>
                    <dt class="baogao_list_icon baogao_tit_color">平台排名：</dt>
                    <dd class="baogao_list_color"><span>史家胡同</span>,<span>五年级三班</span>,<span>迟新月</span>,<span>7</span>万字,<span>3</span>本，<span>112</span>分钟</dd>
                    <dd><span>传媒附小</span>,<span>五年级一班</span>,<span>梁心媛</span>,<span>6.6</span>万字,<span>4</span>本，<span>200</span>分钟</dd>
                    <dd><span>六十五中</span>,<span>五年级二班</span>,<span>陈富林</span>,<span>5.7</span>万字,<span>2</span>本，<span>60</span>分钟</dd>
                </dl>
                <dl>
                    <dt class="baogao_list_icon baogao_tit_color">平台排名：</dt>
                    <dd class="baogao_list_color"><span>史家胡同</span>,<span>五年级三班</span>,<span>迟新月</span>,<span>7</span>万字,<span>3</span>本，<span>112</span>分钟</dd>
                    <dd><span>传媒附小</span>,<span>五年级一班</span>,<span>梁心媛</span>,<span>6.6</span>万字,<span>4</span>本，<span>200</span>分钟</dd>
                    <dd><span>六十五中</span>,<span>五年级二班</span>,<span>陈富林</span>,<span>5.7</span>万字,<span>2</span>本，<span>60</span>分钟</dd>
                </dl>
				<p class="img"></p>
				<p class="jy"><span>建议：</span>可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量。</p>
	
			</div>

            <div class="baogao-area style3">
                <h2></h2> 
               <p>阅读时间分布，一周中周二最长，一天中19：00-21:00</p>
                <p class="img"></p>
                <p class="jy"><span>建议：</span>可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量。</p>
                <p>本学期共阅读<em>军事类</em>书籍<em>2</em>本,<em>教学学科</em>书籍<em>1</em>本,<em>研读类</em>文章<em>6</em>本;对军事类书籍比较有兴趣。</p>
                <p class="img"></p>
                <p class="jy"><span>建议：</span>可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量。</p>
            </div>
			<div class="baogao-area style3">
				<h2>
                    <span class="baogao-area-tit1">任务概况</span>
                </h2>
				<p>本学期布置任务：<em>13</em>项，共有客观题<em>66</em>道，平均正确率<em>76%</em>主观题<em>23</em>题，平均成绩<em>4</em>颗星，学生完成度为<em>96%</em></p>
				<dl>
                    <dt class="baogao_list_icon baogao_tit_color">任务排行：</dt>
                    <dd>五年级四班，综合得分：72分</dd>
                    <dd class="baogao_list_color">五年级四班，综合得分：72分</dd>
                    <dd>五年级四班，综合得分：72分</dd>
                </dl>
                <dl>
                    <dt class="baogao_list_icon baogao_tit_color">平台排行：</dt>
                    <dd>史家胡同,五年级四班,综合得分：72分</dd>
                    <dd>史家胡同,五年级四班,综合得分：72分</dd>
                    <dd class="baogao_list_color">史家胡同,五年级四班,综合得分：72分</dd>
                    <dd>史家胡同,五年级四班,综合得分：72分</dd>
                    <dd>史家胡同,五年级四班,综合得分：72分</dd>
                </dl>				
				<p class="jy"><span>提高排名建议：</span>可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量。</p>
                <p class="img"></p>
			</div>
			<div class="baogao-area style4">
				<h2>
                    <span class="baogao-area-tit1">知识点</span>
                </h2>
				<p>通过测试掌握知识点如下：</p>
				<p class="img"></p>
				<p class="baogao_list_icon baogao_tit_color">以下知识点掌握不错：</p>
				<ul>
					<li>知识点知识点知识点知识点知识点知识点</li>
					<li>知识点知识点知识点知识点知识点知识点</li>
					<li>知识点知识点知识点知识点知识点知识点</li>
					<li>知识点知识点知识点知识点知识点知识点</li>
				</ul>
				<p class="baogao_list_icon baogao_tit_color">以下知识点有所欠缺：</p>
				<ul>
					<li>知识点知识点知识点知识点知识点知识点</li>
					<li>知识点知识点知识点知识点知识点知识点</li>
					<li>知识点知识点知识点知识点知识点知识点</li>
					<li>知识点知识点知识点知识点知识点知识点</li>
				</ul>
				<p class="jy"><span>建议：</span>可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量，可以适当提高阅读量。</p>
			</div>
            <div class="baogao-area style5">
                <h2>
                     <span class="baogao-area-tit1">学生分析</span>
                </h2>
                <p>学生名单列表如下：</p>
                
            </div>
			<div class="baogao-area style5">
				<h2>
                     <span class="baogao-area-tit1">总结</span>
                </h2>
				<p>给学生一个综合评定，比如优、优＋之类的再加一些描述语</p>
			</div>
		</div>
	</div>
</section>
<footer class="footer">
	1231232
</footer>
<script>
function DirectoryNav($h,config){
    this.opts = $.extend(true,{
        scrollThreshold:0.5,    //滚动检测阀值 0.5在浏览器窗口中间部位
        scrollSpeed:700,        //滚动到指定位置的动画时间
        scrollTopBorder:0,    //滚动条距离顶部多少的时候显示导航，如果为0，则一直显示
        easing: 'swing',        //不解释
        delayDetection:200,     //延时检测，避免滚动的时候检测过于频繁
        scrollChange:function(){}
    },config);
    this.$win = $(window);
    this.$h = $h;
    this.$pageNavList = "";
    this.$pageNavListLis ="";
    this.$curTag = "";
    this.$pageNavListLiH = "";
    this.offArr = [];
    this.curIndex = 0;
    this.scrollIng = false;
    this.init();
}

DirectoryNav.prototype = {
    init:function(){
        this.make();
        this.setArr();
        this.bindEvent();
    },
    make:function(){
        $(".baogao").append('<div class="directory-nav" id="directoryNav"><ul></ul><span class="cur-tag"></span></div>');
        var $hs = this.$h,
            $directoryNav = $("#directoryNav"),
            temp = [],
            index1 = 0,
            index2 = 0;
        $hs.each(function(index){
            var $this = $(this),
                    text = $this.text();
            if(this.tagName.toLowerCase()=='h2'){
                index1++;
                if(index1%2==0) index2 = 0;
                temp.push('<li class="l1"><span class="c-dot"></span></li>');
            }else{
                index2++;
                temp.push('<li class="l2">'+index1+'.'+index2+' <a class="l2-text">'+text+'</a></li>');

            }
        });
        $directoryNav.find("ul").html(temp.join(""));

        //设置变量
        this.$pageNavList = $directoryNav;
        this.$pageNavListLis = this.$pageNavList.find("li");
        this.$curTag = this.$pageNavList.find(".cur-tag");
        this.$pageNavListLiH = this.$pageNavListLis.eq(0).height();

        if(!this.opts.scrollTopBorder){
            this.$pageNavList.show();
        }
    },
    setArr:function(){
        var This = this;
        this.$h.each(function(){
            var $this = $(this),
                offT = Math.round($this.offset().top);
            This.offArr.push(offT);
        });
    },
    posTag:function(top){
        this.$curTag.css({top:top+'px'});
    },
    ifPos:function(st){
        var offArr = this.offArr;
        //console.log(st);
        var windowHeight = Math.round(this.$win.height() * this.opts.scrollThreshold);
        for(var i=0;i<offArr.length;i++){
            if((offArr[i] - windowHeight) < st) {
                var $curLi = this.$pageNavListLis.eq(i),
                    tagTop = $curLi.position().top;
                $curLi.addClass("cur").siblings("li").removeClass("cur");
                this.curIndex = i;
                this.posTag(tagTop+this.$pageNavListLiH*0.5);
                //this.curIndex = this.$pageNavListLis.filter(".cur").index();
                this.opts.scrollChange.call(this);
            }
        }
    },
    bindEvent:function(){
        var This = this,
            show = false,
            timer = 0;
        this.$win.on("scroll",function(){
            var $this = $(this);
            clearTimeout(timer);
            timer = setTimeout(function(){
                This.scrollIng = true;
                if($this.scrollTop()>This.opts.scrollTopBorder){
                    if(!This.$pageNavListLiH) This.$pageNavListLiH = This.$pageNavListLis.eq(0).height();
                    if(!show){
                        This.$pageNavList.fadeIn();
                        show = true;
                    }
                    This.ifPos( $(this).scrollTop() );
                }else{
                    if(show){
                        This.$pageNavList.fadeOut();
                        show = false;
                    }
                }
            },This.opts.delayDetection);
        });

        this.$pageNavList.on("click","li",function(){
            var $this = $(this),
                index = $this.index();
            This.scrollTo(This.offArr[index]);
        })
    },
    scrollTo: function(offset,callback) {
        var This = this;
        $('html,body').animate({
            scrollTop: offset
        }, this.opts.scrollSpeed, this.opts.easing, function(){
            This.scrollIng = false;
            //修正弹两次回调
            callback && this.tagName.toLowerCase()=='body' && callback();
        });
    }
};

//实例化
var directoryNav = new DirectoryNav($("h2"),{
    scrollTopBorder:1   //滚动条距离顶部多少的时候显示导航，如果为0，则一直显示
});
</script>
</body>
</html>
